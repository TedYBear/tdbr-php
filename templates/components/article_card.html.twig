{# Article Card Component #}
{% set article = article|default(null) %}
{% if article %}
<div class="card card-hover">
    <a href="{{ path('article_detail', {slug: article.slug}) }}" class="block">
        {# Image #}
        <div class="relative overflow-hidden h-64 bg-gray-100">
            {% if article.images is defined and article.images|length > 0 %}
                <img src="{{ article.images[0].url ?? article.images[0] }}"
                     alt="{{ article.nom }}"
                     class="article-img w-full h-full object-contain transition-transform duration-300 hover:scale-105">
            {% else %}
                <div class="w-full h-full flex items-center justify-center text-gray-400">
                    <svg class="w-16 h-16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                </div>
            {% endif %}

            {# Badge si nouveau #}
            {% if article.createdAt is defined %}
                {% set daysSinceCreation = 'now'|date('U') - article.createdAt|date('U') %}
                {% if daysSinceCreation < (7 * 24 * 3600) %}
                    <span class="absolute top-2 right-2 bg-secondary text-white text-xs font-bold px-3 py-1 rounded-full">
                        Nouveau
                    </span>
                {% endif %}
            {% endif %}

            {# Logo fournisseur #}
            {% if article.fournisseur is defined and article.fournisseur and article.fournisseur.logoFilename %}
                <div class="absolute bottom-2 left-2 bg-white/90 rounded px-1.5 py-1">
                    <img src="/uploads/fournisseurs/{{ article.fournisseur.logoFilename }}"
                         alt="{{ article.fournisseur.nom }}"
                         class="h-5 w-auto object-contain">
                </div>
            {% endif %}
        </div>

        {# Contenu #}
        <div class="p-4">
            {# Nom #}
            <h3 class="font-heading text-lg font-bold text-dark mb-2 line-clamp-2">
                {{ article.nom }}
            </h3>

            {# Description courte #}
            {% if article.description is defined %}
                <p class="text-gray-600 text-sm mb-4 line-clamp-2">
                    {{ article.description|striptags|slice(0, 100) }}
                </p>
            {% endif %}

            {# Prix et CTA #}
            <div class="flex items-center justify-between">
                <div>
                    <span class="text-2xl font-bold text-primary">
                        {{ (article.prix ?? article.prixBase ?? 0)|number_format(2, ',', ' ') }} €
                    </span>
                </div>
                <span class="btn-primary text-sm px-4 py-2">
                    Voir détails
                </span>
            </div>
        </div>
    </a>
</div>
{% endif %}
