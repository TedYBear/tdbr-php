<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}TDBR - Teddy Bears Artisanaux{% endblock %}</title>
    <meta name="description" content="{% block description %}TDBR - Créations artisanales de peluches et teddy bears personnalisés{% endblock %}">

    {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('build/app.3c391010.css') }}">
    {% endblock %}
</head>
<body class="bg-white text-dark font-sans antialiased">
    {% include 'layout/navbar.html.twig' %}

    {# Bandeau site en construction #}
    <div style="background-color:#f59e0b;color:#fff;font-family:inherit;">
        <div style="max-width:1280px;margin:0 auto;padding:10px 16px;">
            <div style="display:flex;flex-wrap:wrap;align-items:center;gap:8px 24px;font-size:0.875rem;">
                <span style="font-weight:700;text-transform:uppercase;letter-spacing:0.05em;font-size:0.75rem;white-space:nowrap;">Site en construction</span>
                <span style="opacity:0.95;flex:1;min-width:200px;">
                    Les articles et prix sont réels &mdash; la commande en ligne n'est pas encore disponible.
                </span>
                <div style="display:flex;flex-wrap:wrap;gap:16px;white-space:nowrap;">
                    <a href="{{ path('contact') }}" style="color:#fff;font-weight:600;text-decoration:underline;">Nous contacter</a>
                </div>
            </div>
        </div>
    </div>

    {% include 'layout/flash_messages.html.twig' %}

    {# Toast notifications #}
    <div
        x-data="{
            toasts: [],
            add(message, type) {
                const id = Date.now();
                this.toasts.push({ id, message, type: type || 'success' });
                setTimeout(() => this.remove(id), 3500);
            },
            remove(id) {
                this.toasts = this.toasts.filter(t => t.id !== id);
            }
        }"
        @toast.window="add($event.detail.message, $event.detail.type)"
        class="fixed bottom-6 right-6 z-50 flex flex-col gap-3"
        style="pointer-events:none;"
        aria-live="polite">
        <template x-for="toast in toasts" :key="toast.id">
            <div
                x-transition:enter="transition ease-out duration-300"
                x-transition:enter-start="opacity-0 translate-y-3"
                x-transition:enter-end="opacity-100 translate-y-0"
                x-transition:leave="transition ease-in duration-200"
                x-transition:leave-start="opacity-100"
                x-transition:leave-end="opacity-0"
                :class="toast.type === 'error' ? 'bg-red-600' : 'bg-gray-900'"
                class="flex items-center gap-3 px-5 py-3 rounded-xl text-white shadow-2xl"
                style="min-width:18rem;pointer-events:auto;">
                <svg x-show="toast.type !== 'error'" class="w-5 h-5 flex-shrink-0" style="color:#4ade80" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"/>
                </svg>
                <svg x-show="toast.type === 'error'" class="w-5 h-5 flex-shrink-0 text-red-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
                <span class="text-sm font-semibold flex-1" x-text="toast.message"></span>
                <button @click="remove(toast.id)" class="ml-2 opacity-60 hover:opacity-100 transition-opacity" style="pointer-events:auto;">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                    </svg>
                </button>
            </div>
        </template>
    </div>

    <main class="min-h-screen">
        {% block body %}{% endblock %}
    </main>

    {% include 'layout/footer.html.twig' %}

    {% block javascripts %}
        <script src="{{ asset('build/runtime.f073a35a.js') }}"></script>
        <script src="{{ asset('build/705.31b65463.js') }}"></script>
        <script src="{{ asset('build/app.579e6744.js') }}"></script>
    {% endblock %}
</body>
</html>
