<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}TDBR - Teddy Bears Artisanaux{% endblock %}</title>
    <meta name="description" content="{% block description %}TDBR - Créations artisanales de peluches et teddy bears personnalisés{% endblock %}">

    {% block stylesheets %}
        <link rel="stylesheet" href="{{ asset('build/app.3c391010.css') }}">
    {% endblock %}
</head>
<body class="bg-white text-dark font-sans antialiased">
    {% include 'layout/navbar.html.twig' %}

    {# Bandeau site en construction #}
    <div style="background-color:#f59e0b;color:#fff;font-family:inherit;">
        <div style="max-width:1280px;margin:0 auto;padding:10px 16px;">
            <div style="display:flex;flex-wrap:wrap;align-items:center;gap:8px 24px;font-size:0.875rem;">
                <span style="font-weight:700;text-transform:uppercase;letter-spacing:0.05em;font-size:0.75rem;white-space:nowrap;">Site en construction</span>
                <span style="opacity:0.95;flex:1;min-width:200px;">
                    Les articles et prix sont réels &mdash; la commande en ligne n'est pas encore disponible.
                </span>
                <div style="display:flex;flex-wrap:wrap;gap:16px;white-space:nowrap;">
                    <a href="{{ path('contact') }}" style="color:#fff;font-weight:600;text-decoration:underline;">Nous contacter</a>
                </div>
            </div>
        </div>
    </div>

    {% include 'layout/flash_messages.html.twig' %}

    {# Toast notifications — vanilla JS, aucune dépendance Alpine #}
    <div id="toast-container" style="position:fixed;bottom:1.5rem;right:1.5rem;z-index:9999;display:flex;flex-direction:column;gap:0.75rem;pointer-events:none;" aria-live="polite"></div>
    <script>
    window.showToast = function(message, type) {
        var container = document.getElementById('toast-container');
        if (!container) return;

        var toast = document.createElement('div');
        toast.style.cssText = 'min-width:18rem;padding:0.75rem 1.25rem;border-radius:0.75rem;color:#fff;display:flex;align-items:center;gap:0.75rem;box-shadow:0 10px 25px rgba(0,0,0,0.25);pointer-events:auto;opacity:0;transform:translateY(0.5rem);transition:opacity 0.3s,transform 0.3s;background-color:' + (type === 'error' ? '#dc2626' : '#111827');

        var icon = type === 'error'
            ? '<svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="flex-shrink:0"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>'
            : '<svg width="20" height="20" fill="none" stroke="#4ade80" viewBox="0 0 24 24" style="flex-shrink:0"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"/></svg>';

        toast.innerHTML = icon
            + '<span style="font-size:0.875rem;font-weight:600;flex:1">' + message + '</span>'
            + '<button onclick="this.closest(\'[data-toast]\')._remove()" style="opacity:0.6;cursor:pointer;background:none;border:none;color:#fff;padding:0;line-height:0;margin-left:0.5rem">'
            + '<svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>'
            + '</button>';

        toast.dataset.toast = '1';
        toast._remove = function() {
            clearTimeout(timer);
            toast.style.opacity = '0';
            toast.style.transform = 'translateY(0.5rem)';
            setTimeout(function() { if (toast.parentNode) toast.parentNode.removeChild(toast); }, 300);
        };

        container.appendChild(toast);
        requestAnimationFrame(function() {
            requestAnimationFrame(function() {
                toast.style.opacity = '1';
                toast.style.transform = 'translateY(0)';
            });
        });

        var timer = setTimeout(function() { toast._remove(); }, 3500);
    };
    </script>

    <main class="min-h-screen">
        {% block body %}{% endblock %}
    </main>

    {% include 'layout/footer.html.twig' %}

    {% block javascripts %}
        <script src="{{ asset('build/runtime.f073a35a.js') }}"></script>
        <script src="{{ asset('build/705.31b65463.js') }}"></script>
        <script src="{{ asset('build/app.579e6744.js') }}"></script>
    {% endblock %}
</body>
</html>
