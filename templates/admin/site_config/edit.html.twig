{% extends 'admin/base_admin.html.twig' %}

{% block title %}Configuration du site{% endblock %}
{% block page_title %}Configuration du site{% endblock %}

{% block body %}
    <div class="max-w-2xl">
        <div class="card p-6">
            <h2 class="text-xl font-bold mb-6">Bandeau d'information</h2>

            <form method="post">
                {# Toggle actif/inactif #}
                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg mb-6">
                    <div>
                        <div class="font-semibold text-gray-800">Afficher le bandeau</div>
                        <div class="text-sm text-gray-500">Le bandeau orange apparaît en haut de toutes les pages du site</div>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" name="bannerActive" value="1" class="sr-only peer"
                               {{ config.bannerActive ? 'checked' : '' }}>
                        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer
                                    peer-checked:after:translate-x-full peer-checked:after:border-white
                                    after:content-[''] after:absolute after:top-[2px] after:left-[2px]
                                    after:bg-white after:border-gray-300 after:border after:rounded-full
                                    after:h-5 after:w-5 after:transition-all peer-checked:bg-amber-500"></div>
                    </label>
                </div>

                {# Titre #}
                <div class="mb-4">
                    <label class="block text-sm font-semibold text-gray-700 mb-1" for="bannerTitre">
                        Titre du bandeau
                    </label>
                    <input type="text" id="bannerTitre" name="bannerTitre"
                           value="{{ config.bannerTitre }}"
                           maxlength="100"
                           class="form-input w-full"
                           placeholder="Site en construction">
                    <p class="text-xs text-gray-400 mt-1">Affiché en majuscules et gras à gauche</p>
                </div>

                {# Texte #}
                <div class="mb-6">
                    <label class="block text-sm font-semibold text-gray-700 mb-1" for="bannerTexte">
                        Message
                    </label>
                    <textarea id="bannerTexte" name="bannerTexte"
                              maxlength="500"
                              rows="3"
                              class="form-input w-full resize-none"
                              placeholder="Message affiché dans le bandeau...">{{ config.bannerTexte }}</textarea>
                    <p class="text-xs text-gray-400 mt-1">Texte principal du bandeau (max. 500 caractères)</p>
                </div>

                {# Aperçu #}
                <div class="mb-6">
                    <div class="text-sm font-semibold text-gray-700 mb-2">Aperçu</div>
                    <div style="background-color:#f59e0b;color:#fff;border-radius:0.5rem;padding:10px 16px;">
                        <div style="display:flex;flex-wrap:wrap;align-items:center;gap:8px 24px;font-size:0.875rem;">
                            <span id="preview-titre" style="font-weight:700;text-transform:uppercase;letter-spacing:0.05em;font-size:0.75rem;white-space:nowrap;">
                                {{ config.bannerTitre }}
                            </span>
                            <span id="preview-texte" style="opacity:0.95;flex:1;min-width:200px;">
                                {{ config.bannerTexte }}
                            </span>
                        </div>
                    </div>
                </div>

                <div class="flex gap-3">
                    <button type="submit" class="btn-primary px-6 py-2.5">
                        Enregistrer
                    </button>
                    <a href="{{ path('admin_dashboard') }}" class="btn-secondary px-6 py-2.5">
                        Annuler
                    </a>
                </div>
            </form>
        </div>
    </div>

    <script>
    document.getElementById('bannerTitre').addEventListener('input', function() {
        document.getElementById('preview-titre').textContent = this.value || 'Titre';
    });
    document.getElementById('bannerTexte').addEventListener('input', function() {
        document.getElementById('preview-texte').textContent = this.value || 'Message...';
    });
    </script>
{% endblock %}
